<h1>Final Project</h1>
<h2>web based synth using [rnbo~]</h2>

<p1>I created a basic synth in rnbo~ based loosely on the moog mavis. I originally wanted to add the capability to patch but I didn’t think it would be all that useful and a pain to implement more than anything. 

After the rnbo~ device was mostly working I started work on the html / js. I started off with the [rnbo example webpage](https://github.com/Cycling74/rnbo.example.webpage) created by cycling 74. It handles creating the rnbo device in the web and created a basic template for parameters ins and outs etc. I tested the synth to make sure things were working as expected and tweaked minor things like values or slight bugs. For example my square duty was being set to -1, not fun. 

After I was satisfied with the synth I started implementing web midi which was a lot easier than I expected. I looked at [an article](https://www.smashingmagazine.com/2018/03/web-midi-api/) about how to use web midi to get it up and running. these were the only lines I really copied over. I did tweak them to my liking-ish. I was worried it would be a bit of a pain because I had seen people talking about WEBMIDI.js saying it was easier to use. It turns out control systems (is that the right class?) was useful and people were only annoyed because they didn’t understand midi messages. I decided to send all midi into the rnbo device and not select a specific midi controller or channel. That is something I could definietly add and would make this project more useful.

When the midi was working I started work on the CC mapping. the first thing I did was create the ability to add the select objects and delete different rows of mappings it wasn’t too complicated. I avoided taking user input for the cc number because I didn’t want to clean it. This is when I started with the layout, taking out things from cycling that I didn’t need and cleaning up the look a little. 

The most painful part was trying to figure out a way to keep track of what is mapped to what. If I had decided to put all the maps in an array [ param, cc, param, cc ] or [ [ param, cc ], [ param, cc ] ]  I would have needed to keep track of which cc map group thing was at each index so that when I delete a map I can remove it from the array but then I would have to re-number the mappings after the one that was deleted. I decided that was too much work. and decided on keeping an array for the order of the parameter sliders. then when you send a cc into the code it checks all the current mappings to the incoming cc. If there is a match it sends the cc into the right parameter. It's probably slower this way but there isn't significant delay when playing notes or changing parameters

Overall this was fun to dive into. lots of googling like “array methods” “css slider” “how to select input with type range only in css” etc. w3 schools provided many answers everything else was stack overflow or MDN web docs. I didn’t copy things over but made sure to type them out (I think its better). the only other thing is sending midi into the rnbo device. that was hard to find but I found a [forum post](https://cycling74.com/forums/web-export-and-midi) and saw how they were sending the midi in. its very similar to how you send a param change when you move a slider.

all the code I wrote should be marked as such which is mainly the two functions at the end of the app.js. There was a lot of tweaking and poking around with console.log() and there are still things to be improved like naming of variables and functions for readability and general cleaning of code</p1>
